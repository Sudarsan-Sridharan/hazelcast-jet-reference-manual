<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="Hazelcast, IMDG, In-Memory Data Grid, Scalable, Clustering, Partitioning, Distributed, Open Source, distributed map, queue, topic, ringbuffer, executor service, transactions, high-density memory, jcache, mapreduce, aggregators, Java client, serialization">
    <meta name="description" content="Hazelcast Reference Manual explains all in-memory data grid features provided by Hazelcast in detail with code samples and configuration options.">
    <title>Jet 0.2-SNAPSHOT Reference Manual</title>

    <link type="text/css" rel="stylesheet" href="assets/css/reset.css">
    <link type="text/css" rel="stylesheet" href="http://yandex.st/highlightjs/7.3/styles/github.min.css">
    <link type="text/css" rel="stylesheet" href="assets/css/docs.css">
    <link type="text/css" rel="stylesheet" href="assets/css/print.css" media="print">
    

    <script type="text/javascript" src="assets/js/jquery-1.10.1.min.js"></script>
    <script type="text/javascript" src="assets/js/jquery.sticky-kit.min.js"></script>
    <script type="text/javascript" src="http://yandex.st/highlightjs/6.1/highlight.min.js"></script>
    <script type="text/javascript" src="assets/js/lunr.min.js"></script>
    <script type="text/javascript" src="assets/js/jquery.scrollUp.min.js"></script>

    <script type="text/javascript">
	$(function () {
		$.scrollUp({
			scrollName: 'scrollUp',
			topDistance: '300',
			topSpeed: 100,
			animation: 'fade',
			animationInSpeed: 100,
			animationOutSpeed: 100,
			scrollText: 'Back to Top',
			activeOverlay: false,
		});
	});
    </script>

    

    <script type="text/javascript">var BASE_URL = "";</script>
    <script type="text/javascript" src="assets/js/viewer.js"></script>
    <script type="text/javascript" src="assets/js/toc.scroll.min.js"></script>

    <script type="text/javascript">
  	$(function(){
		$("#sidebar").stick_in_parent()
	});
    </script>
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-3921306-1']);
        _gaq.push(['_setDomainName', 'hazelcast.com']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <script type="text/javascript">
        setTimeout(function(){var a=document.createElement("script");
            var b=document.getElementsByTagName("script")[0];
            a.src=document.location.protocol+"//dnn506yrbagrg.cloudfront.net/pages/scripts/0020/7413.js?"+Math.floor(new Date().getTime()/3600000);
            a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
    </script>

</head>
<body>
	<div id="page">
		<a name="top" />
			<div id="sitebar">
				<div class="content">
					<p><a href="http://docs.hazelcast.org/jet">Go to <span style="font-weight:bold">docs.hazelcast.org/jet</span></a></p>
				</div>
			</div>
		<header id="header">
			<div class="content">
				<div style="overflow:hidden">
					<div style="float:left">
						<a href="http://jet.hazelcast.org"><img src="assets/img/logo.png" style="width: 270px;padding-top: 8px"/></a>
					</div>
					<div style="float:left;padding-top: 30px;padding-left: 30px;">
					<a href=""></a> <span style="font-size:36px;color:##113847"> Reference Manual </span> <span style="font-size:12px;color:##113847"> Version: 0.2-SNAPSHOT - Publication Date : Aug 26, 2016 </span>
					</div>
				</div>
			</div>
		</header>
		<div class="content">
			
	<div id="sidebar" style="overflow-y:auto">
	    <form action="search.html"><input id="search" type="text" placeholder="Search" name="q" /></form>
	    <nav id="toc">
	        
    <ol>
    
        <li>
            <a href="index.html#preface">Preface</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="index.html#code-deployment">Code Deployment</a>
            
                
    <ol>
    
        <li>
            <a href="index.html#configuration">Configuration</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="index.html#example-configuration">Example Configuration</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="index.html#retrieving-deployed-resources-on-the-processor">Retrieving deployed resources on the Processor</a>
            
                
    <ol>
    
        <li>
            <a href="index.html#example">Example</a>
            
        </li>
    
</ol>

            
        </li>
    
</ol>

            
        </li>
    
</ol>

	    </nav>
	    
	    <nav id="links">
	        <ul>
	            
	        </ul>
	    </nav>
	    
	</div>

				<div id="content">
					<a name="preface"></a><h1 id="preface">Preface</h1>
<p>Welcome to the Jet Reference Manual. This manual includes concepts, instructions, and samples to guide you on how to use Jet and build Jet applications.</p>
<p>As the reader of this manual, you must be familiar with the Java programming language and you should have installed your preferred Integrated Development Environment (IDE).</p>
<a name="code-deployment"></a><h1 id="code-deployment">Code Deployment</h1>
<p>Code deployment feature enables you to distribute various resources to be used in your processors.
Those resources can be a class file, JAR file or any type of file. By deploying your classes/JAR files to the cluster, you don&#39;t need to worry about restarting the cluster to update the business logic anymore. The only thing you need to do is just configure required class/JAR files for your Job and Hazelcast Jet will handle the distribution of your classes to the all nodes and loading of them when required. Hazelcast JET also provides isolation of the resources in the Job scope.</p>
<p>Note: The deployed classes will be available only to Jet Processors&#39; classloader. If you&#39;d like to use Hazelcast data structures as sources or sinks, the types you want to store in Hazelcast data structures must be present on the Hazelcast classpath.</p>
<a name="configuration"></a><h2 id="configuration">Configuration</h2>
<p>You can use any of the following methods to specify the deployment on your <code>JobConfig</code> object. The specified with resource will be uploaded to the all worker nodes when the Job starts it&#39;s execution.</p>
<pre><code class="lang-java">/**
  * Add class to the job classLoader
  *
  * @param classes classes, which will be used during calculation
  */
 public void addClass(Class... classes)

 /**
  * Add JAR to the job classLoader
  *
  * @param url location of the JAR file
  */
 public void addJar(URL url)

 /**
  * Add JAR to the job classLoader
  *
  * @param url location of the JAR file
  * @param id  identifier for the JAR file
  */
 public void addJar(URL url, String id)

 /**
  * Add JAR to the job classLoader
  *
  * @param file the JAR file
  */
 public void addJar(File file)

 /**
  * Add JAR to the job classLoader
  *
  * @param file the JAR file
  * @param id   identifier for the JAR file
  */
 public void addJar(File file, String id)

 /**
  * Add JAR to the job classLoader
  *
  * @param path path the JAR file
  */
 public void addJar(String path)

 /**
  * Add JAR to the job classLoader
  *
  * @param path path the JAR file
  * @param id   identifier for the JAR file
  */
 public void addJar(String path, String id)

 /**
  * Add resource to the job classLoader
  *
  * @param url source url with classes
  */
 public void addResource(URL url)

 /**
  * Add resource to the job classLoader
  *
  * @param url source url with classes
  * @param id  identifier for the resource
  */
 public void addResource(URL url, String id)

 /**
  * Add resource to the job classLoader
  *
  * @param file resource file
  */
 public void addResource(File file)

 /**
  * Add resource to the job classLoader
  *
  * @param file resource file
  * @param id   identifier for the resource
  */
 public void addResource(File file, String id)

 /**
  * Add resource to the job classLoader
  *
  * @param path path of the resource
  */
 public void addResource(String path)

 /**
  * Add resource to the job classLoader
  *
  * @param path path of the resource
  * @param id   identifier for the resource
  */
 public void addResource(String path, String id)
</code></pre>
<a name="example-configuration"></a><h2 id="example-configuration">Example Configuration</h2>
<pre><code class="lang-java">JobConfig config = new JobConfig();
String jarPath = &quot;/path/to/jar/file.jar&quot;;
config.addJar(path);

Job job = JetEngine.getJob(hazelcastInstance, name, dag, config);
job.execute(); // The JAR file will be uploaded to the all nodes
// All the classes it contains will be loaded by the worker class loader
</code></pre>
<a name="retrieving-deployed-resources-on-the-processor"></a><h2 id="retrieving-deployed-resources-on-the-processor">Retrieving deployed resources on the Processor</h2>
<p>All the deployments will be available as a resource to the <code>Processor</code> class loader. To access those resources inside a processor, you need to get a reference to the class loader, then access to the resource either using <code>getResource(String name)</code> or <code>getResourceAsStream(String name)</code> methods. Resources can be accessed via their file names or with the identifiers (if assigned any while configuring the deployment).</p>
<a name="example"></a><h3 id="example">Example</h3>
<pre><code class="lang-java">@Override
public boolean process(ProducerInputStream inputStream,
                       ConsumerOutputStream outputStream,
                       String sourceName, ProcessorContext processorContext) throws Exception {

    ClassLoader contextClassLoader = Thread.currentThread().getContextClassLoader();
    URL url = contextClassLoader.getResource(&quot;lookupTable&quot;);
    // URL points to the deployed `lookupTable` resource.
    ....
    return true;
}
</code></pre>





				</div>
				<a class="sendfix" href="https://github.com/hazelcast/hazelcast-jet-reference-manual/issues/new" target="_blank">Send Us a Fix!</a>
		</div>
	</div>
</body>
</html>
